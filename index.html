<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  
  <title>Frontend Mentor | E-commerce product page</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

 <div class="lightbox">
   <img src="./images/icon-close.svg" alt="" srcset="" class="lightbox_close">
    <div class="product__display">
      <div class="large-img">
        <button class="img-arrow previous" value='previous'><img src="./images/icon-previous.svg"  alt=""></button>
          <img src="./images/image-product-1.jpg" alt="" class="lightbox_product-display__thumbnail">
          <button class="img-arrow next" value='next'><img src="./images/icon-next.svg"  alt=""></button>
      </div>
      <div class="product__diplay_btns">
        <button class="lightbox_img-btns active" value="image-product-1"><img  class="product__btn-img" src="./images/image-product-1-thumbnail.jpg" alt=""></button>
        <button class="lightbox_img-btns" value="image-product-2"><img class="product__btn-img" src="./images/image-product-2-thumbnail.jpg" alt=""></button>
        <button class="lightbox_img-btns" value="image-product-3"><img class="product__btn-img" src="./images/image-product-3-thumbnail.jpg" alt=""></button>
        <button class="lightbox_img-btns" value="image-product-4"><img class="product__btn-img" src="./images/image-product-4-thumbnail.jpg" alt=""></button>
      </div>
    </div>
</div>

<header class="header-container">
  <img src="./images/logo.svg" alt="" class="header_logo">
  
  <nav class="header__nav">
    <ul class="header__nav-list">
      <li><a class="header__nav-item" href="#">Collections</a></li>
      <li><a class="header__nav-item" href="#">Men</a></li>
      <li><a class="header__nav-item" href="#">Women</a></li>
      <li><a class="header__nav-item" href="#">About</a></li>
      <li><a class="header__nav-item" href="#">Contact</a></li>
    </ul> 
  </nav>

<div class="header__user">
  <div class="cart-container">
    <button class="cart-icon" id="cartToggle">
      <svg width="22" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M20.925 3.641H3.863L3.61.816A.896.896 0 0 0 2.717 0H.897a.896.896 0 1 0 0 1.792h1l1.031 11.483c.073.828.52 1.726 1.291 2.336C2.83 17.385 4.099 20 6.359 20c1.875 0 3.197-1.87 2.554-3.642h4.905c-.642 1.77.677 3.642 2.555 3.642a2.72 2.72 0 0 0 2.717-2.717 2.72 2.72 0 0 0-2.717-2.717H6.365c-.681 0-1.274-.41-1.53-1.009l14.321-.842a.896.896 0 0 0 .817-.677l1.821-7.283a.897.897 0 0 0-.87-1.114ZM6.358 18.208a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm10.015 0a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm2.021-7.243-13.8.81-.57-6.341h15.753l-1.383 5.53Z" fill="hsl(220, 13%, 13%)" fill-rule="nonzero" /></svg>
      <span class="cart_count">0</span>
    </button>

    <div div class="cart-dropdown" id="cartDropdown">
      <h3>Cart</h3>
      <div class="cart-content empty">
        <p>Your cart is empty.</p>
      </div>
      
    </div>
  </div>
    <img src="./images/image-avatar.png" alt="" class="header__avatar">
</div>

</header>

  <main>

    <div class="product__display">
      <img src="./images/image-product-1.jpg" alt="" class="product-display__thumbnail">
      <div class="product__diplay_btns">
        <button class="img-btns active" value="image-product-1"><img  class="product__btn-img" src="./images/image-product-1-thumbnail.jpg" alt=""></button>
        <button class="img-btns" value="image-product-2"><img class="product__btn-img" src="./images/image-product-2-thumbnail.jpg" alt=""></button>
        <button class="img-btns" value="image-product-3"><img class="product__btn-img" src="./images/image-product-3-thumbnail.jpg" alt=""></button>
        <button class="img-btns" value="image-product-4"><img class="product__btn-img" src="./images/image-product-4-thumbnail.jpg" alt=""></button>
      </div>
    </div>

    <div class="product__container">
      <h1 class="product__company">Sneaker Company</h1>
      <h2 class="product__name">Fall Limited Edition Sneakers</h2>
      <p class="product__info">
        These low-profile sneakers are your perfect casual wear companion. Featuring a
        durable rubber outer sole, they’ll withstand everything the weather can offer.
      </p>
      <p class="product__price">$125.00<span>50%</span></p>
      <p class="product__og__price">$250.00</p>
      <div class="product__interactions">
        <div class="counter">
          <button class="btn decrement disabled" value="decrement">−</button>
          <span class="count">0</span>
          <button class="btn increment" value="increment">+</button>
        </div>
        <button class="product__btn">
        <svg width="22" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M20.925 3.641H3.863L3.61.816A.896.896 0 0 0 2.717 0H.897a.896.896 0 1 0 0 1.792h1l1.031 11.483c.073.828.52 1.726 1.291 2.336C2.83 17.385 4.099 20 6.359 20c1.875 0 3.197-1.87 2.554-3.642h4.905c-.642 1.77.677 3.642 2.555 3.642a2.72 2.72 0 0 0 2.717-2.717 2.72 2.72 0 0 0-2.717-2.717H6.365c-.681 0-1.274-.41-1.53-1.009l14.321-.842a.896.896 0 0 0 .817-.677l1.821-7.283a.897.897 0 0 0-.87-1.114ZM6.358 18.208a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm10.015 0a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm2.021-7.243-13.8.81-.57-6.341h15.753l-1.383 5.53Z" fill="hsl(220, 13%, 13%)" fill-rule="nonzero" /></svg>
        Add to cart</button>
      </div>
    </div>

 

  </main>
    
 <script>

  let count = 0;
  let cartTotal = 0; 
  let price = 125.00; 

  let cart = {
    items: [], 
  };

  let counter = 1 ; 
  let sharedDisplay ; 

  const quantityButtons = document.querySelectorAll('.btn');
  const decrement = document.querySelector('.decrement');

  const addToCartBtn = document.querySelector('.product__btn')
  const countNo = document.querySelector('.count')

  const imgBtns = document.querySelectorAll('.img-btns');

  const lightimgBtns = document.querySelectorAll('.lightbox_img-btns');

  const img = document.querySelectorAll('product__btn-img');
  const displayImg = document.querySelector('.product-display__thumbnail');
  const lightBox_displayImg = document.querySelector('.lightbox_product-display__thumbnail');
  
  const cartToggle = document.getElementById('cartToggle');
  const cartDropdown = document.getElementById('cartDropdown');

  const lightBox = document.querySelector('.lightbox')
  const lightBox_close = document.querySelector('.lightbox_close');

  const arrowBtns = document.querySelectorAll('.img-arrow') 
  const cartCount = document.querySelector('.cart_count')

  quantityButtons.forEach(button =>{

    button.addEventListener('click', ()=>{
      
      if (button.value == 'increment') {
          count += 1; 
          countNo.innerHTML = `${count}`;
          decrementCheck(count);
      }

      else if(button.value == "decrement"){
        count -= 1; 
        decrementCheck(count);
        countNo.innerHTML = `${count}`;
      }
      
    })
  })

  function decrementCheck(params){
  if (count  === 0 ) {
            decrement.classList.add('disabled')
        }     
        else{
          decrement.classList.remove('disabled')
        }
  }
 
  addToCartBtn.addEventListener('click', ()=>{

    const product = {
    id: 1,
    name: 'Fall Limited Edition Sneakers',
    price: 125.0,
    quantity: count,
    image: 'images/image-product-1-thumbnail.jpg'
  };
    addToCart(product);

    count = 0; 
    countNo.innerHTML = `${count}`;
    decrement.classList.add('disabled')
  })

  imgBtns.forEach(imgBtn =>{
    imgBtn.addEventListener('click', ()=>{

      imgBtns.forEach(b=>{b.classList.remove('active')})
      
      imgBtn.classList.add('active');

      displayImg.src = `/images/${imgBtn.value}.jpg`
      lightBox_displayImg.src = `/images/${imgBtn.value}.jpg`
      sharedDisplay = imgBtn.value
    })
  })

displayImg.addEventListener('click' , () =>{
  lightBox.classList.add('display')


  lightimgBtns.forEach(b => b.classList.remove('active'));

  lightimgBtns.forEach(imgBtn => {
      if (imgBtn.value === sharedDisplay) {
        imgBtn.classList.add('active');
      }
    });
})

lightBox_close.addEventListener('click' ,()=>{
  lightBox.classList.remove('display')

} ) 

lightimgBtns.forEach(imgBtn =>{
    imgBtn.addEventListener('click', ()=>{

      lightimgBtns.forEach(b=>{b.classList.remove('active')})
      
      imgBtn.classList.add('active');

      lightBox_displayImg.src = `/images/${imgBtn.value}.jpg`
      
    })
  })

arrowBtns.forEach(button => {
  button.addEventListener('click', () => {

    if (button.value === 'next') {
      counter++;
      if (counter === 5) {
        counter = 1;
      }
    }
    else{
      counter--
      if (counter === 0) {
        counter = 4;
      }
    }

    lightBox_displayImg.src = `/images/image-product-${counter}.jpg`;

    lightimgBtns.forEach(b => b.classList.remove('active'));

    lightimgBtns.forEach(imgBtn => {
      if (imgBtn.value === `image-product-${counter}`) {
        imgBtn.classList.add('active');
      }
    });
  });
});

function addToCart(product) {
   if (count === 0) return; 

  const existing = cart.items.find(item => item.id === product.id);

  if (existing) {
    existing.quantity += product.quantity;
  } else {
    cart.items.push(product);
  }

  updateCartUI();
}


cartToggle.addEventListener('click', () => {
  cartDropdown.style.display = cartDropdown.style.display === 'block' ? 'none' : 'block';
});

function updateCartUI() {
  const cartContent = document.querySelector('.cart-content');

  cartContent.innerHTML = '';

  if (cart.items.length  === 0) {
    cartContent.innerHTML = '<p>Your cart is empty.</p>';
  }
  
  console.log(cart.items.length);

  
  cart.items.forEach(item =>{
    const total = (item.price * item.quantity).toFixed(2);
    cartCount.innerHTML = `${item.quantity}`
    
      const itemHTML = `
      <div>
        <div class="cart-item">
          <img src="${item.image}" alt="${item.name}" class="cart-item-thumb" />
          <div class="cart-item-details">
            <p>${item.name}</p>
            <p>$${item.price.toFixed(2)} × ${item.quantity} <strong>$${total}</strong></p>
          </div>
          <button class="delete-btn" data-id="${item.id}"><img src="./images/icon-delete.svg" alt="" class="cart_delete"></button>
        </div>
        <button class="checkout-btn">Checkout</button>
      </div>
    `;

    cartContent.innerHTML = itemHTML;
    })
  
    document.querySelectorAll('.delete-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      
      const deleteBtn = e.target.closest('.delete-btn');

      const id = parseInt(deleteBtn.dataset.id);      

      cart.items = cart.items.filter(item => item.id !== id);
      updateCartUI();
    });
  });
}




 </script>
</body>
</html>